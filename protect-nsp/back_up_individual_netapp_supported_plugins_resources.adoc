---
permalink: protect-nsp/back_up_individual_netapp_supported_plugins_resources.html 
sidebar: sidebar 
keywords: backup, NetApp supported plug-ins, NetApp supported plug-ins, MongoDB, ORASCPM, Oracle Applications, SAP ASE, SAP MaxDB, Storage plug-in 
summary: 如果单个NetApp支持的插件资源不属于任何资源组，您可以从“资源”页面备份该资源。您可以按需备份资源，或者，如果资源附加了策略并配置了计划，则备份将根据计划自动进行。 
---
= 备份单个NetApp支持的插件资源
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
如果单个NetApp支持的插件资源不属于任何资源组，您可以从“资源”页面备份该资源。您可以按需备份资源，或者，如果资源附加了策略并配置了计划，则备份将根据计划自动进行。

.开始之前
* 您必须已经创建了备份策略。
* 如果要备份与二级存储具有SnapMirror关系的资源，则分配给存储用户的ONTAP角色应包括“`snapmirror all`”权限。但是，如果您使用“vsadmin”角色，则不需要“snapmirror all”权限。


[role="tabbed-block"]
====
.SnapCenter UI
--
.步骤
. 在左侧导航窗格中，单击“*资源*”，然后从列表中选择适当的插件。
. 在资源页面中，根据资源类型从*查看*下拉列表中过滤资源。
+
点击image:../media/filter_icon.gif["筛选图标"]，然后选择主机名和资源类型来过滤资源。然后您可以点击image:../media/filter_icon.gif["筛选图标"]关闭筛选器窗格。

. 单击要备份的资源。
. 在资源页面中，如果要使用自定义名称，请选中*使用自定义名称格式作为 Snapshot 副本*复选框，然后输入自定义名称格式作为 Snapshot 名称。
+
例如，_customtext_policy_hostname_ 或 _resource_hostname_。默认情况下，时间戳会附加到快照名称。

. 在应用程序设置页面中，执行以下操作：
+
.. 单击“*备份*”箭头以设置其他备份选项：
+
如果需要，启用一致性组备份并执行以下任务：

+
|===
| 对于这个领域... | 操作 


 a| 
留出时间等待一致性组快照操作完成
 a| 
选择“紧急”、“中等”或“轻松”来指定等待快照操作完成的时间。

紧急 = 5 秒，中等 = 7 秒，轻松 = 20 秒。



 a| 
禁用WAFL同步
 a| 
选择此项以避免强制使用WAFL一致点。

|===
+
image:../media/application_settings.gif["应用程序设置页面"]

.. 单击“*脚本*”箭头可运行静止、快照和取消静止操作的前置和后置命令。您还可以在退出备份操作之前运行预命令。
+
前言和后记在SnapCenter服务器中运行。

.. 单击“*自定义配置*”箭头，然后输入使用此资源的所有作业所需的自定义值对。
.. 单击*Snapshot Copy Tool*箭头选择创建快照的工具：
+
|===
| 如果你想... | 操作 


 a| 
SnapCenter用于拍摄存储级别快照
 a| 
选择“* 不具有文件系统一致性的SnapCenter *”。



 a| 
SnapCenter使用 Windows 插件将文件系统置于一致状态，然后拍摄快照
 a| 
选择*具有文件系统一致性的SnapCenter *。



 a| 
输入创建快照的命令
 a| 
选择*其他*，然后输入创建快照的命令。

|===


. 在“策略”页面中，执行以下步骤：
+
.. 从下拉列表中选择一个或多个策略。
+

NOTE: 您还可以通过单击来创建策略image:../media/add_policy_from_resourcegroup.gif["添加图标"]。

+
在“为选定策略配置计划”部分中，列出了选定的策略。

.. 点击image:../media/add_policy_from_resourcegroup.gif["添加图标"]在要配置计划的策略的配置计划列中。
.. 在为策略_policy_name_添加计划对话框中，配置计划，然后单击*确定*。
+
其中，_policy_name_ 是您选择的策略的名称。

+
配置的计划列在“已应用的计划”列中。



. 在通知页面中，从*电子邮件首选项*下拉列表中，选择您想要发送电子邮件的场景。
+
您还必须指定发件人和收件人的电子邮件地址以及电子邮件的主题。还必须在*设置* > *全局设置*中配置 SMTP。

. 查看摘要，然后单击“*完成*”。
+
进入资源拓扑页面。

. 单击*立即备份*。
. 在备份页面中，执行以下步骤：
+
.. 如果您已对资源应用了多个策略，请从“*策略*”下拉列表中选择要用于备份的策略。
+
如果为按需备份选择的策略与备份计划相关联，则按需备份将根据为计划类型指定的保留设置进行保留。

.. 单击“*备份*”。


. 通过单击“*监视*”>“*作业*”来监视操作进度。


--
.PowerShell cmdlet
--
.步骤
. 使用 Open-SmConnection cmdlet 为指定用户启动与SnapCenter服务器的连接会话。
+
[listing]
----
Open-smconnection  -SMSbaseurl  https:\\snapctr.demo.netapp.com:8146\
----
+
显示用户名和密码提示。

. 使用 Add-SmResources cmdlet 添加资源。
+
此示例添加资源：

+
[listing]
----
Add-SmResource -HostName 'scc55.sccore.test.com' -PluginCode 'DummyPlugin' -ResourceName QDBVOL1 -ResourceType Database -StorageFootPrint ( @{"VolumeName"="qtree_vol1_scc55_sccore_test_com";"QTREENAME"="qtreeVol1";"StorageSystem"="vserver_scauto_primary"}) -Instance QTREE1
----
. 使用 Add-SmPolicy cmdlet 创建备份策略。
+
此示例创建一个新的备份策略：

+
[listing]
----
Add-SMPolicy -PolicyName 'test2' -PolicyType 'Backup' -PluginPolicyType DummyPlugin  -description 'testPolicy'
----
. 使用 Add-SmResourceGroup cmdlet 向SnapCenter添加新的资源组。
+
此示例使用指定的策略和资源创建一个新的资源组：

+
[listing]
----
Add-SmResourceGroup -ResourceGroupName 'Verify_Backup_on_Multiple_Qtree_different_vserver_windows' -Resources @(@{"Host"="scc55.sccore.test.com";"Uid"="QTREE2";"PluginName"="DummyPlugin"},@{"Host"="scc55.sccore.test.com";"Uid"="QTREE";"PluginName"="DummyPlugin"}) -Policies test2 -plugincode 'DummyPlugin' -usesnapcenterwithoutfilesystemconsistency
----
. 使用 New-SmBackup cmdlet 启动新的备份作业。
+
[listing]
----
New-SMBackup -DatasetName Verify_Backup_on_Multiple_Qtree_different_vserver_windows -Policy test2
----
. 使用 Get-SmBackupReport cmdlet 查看备份作业的状态。
+
此示例显示在指定日期运行的所有作业的作业摘要报告：

+
[listing]
----
Get-SmBackupReport -JobId 149

BackedUpObjects           : {QTREE2, QTREE}
FailedObjects             : {}
IsScheduled               : False
HasMetadata               : False
SmBackupId                : 1
SmJobId                   : 149
StartDateTime             : 1/15/2024 1:35:17 AM
EndDateTime               : 1/15/2024 1:36:19 AM
Duration                  : 00:01:02.4265750
CreatedDateTime           : 1/15/2024 1:35:51 AM
Status                    : Completed
ProtectionGroupName       : Verify_Backup_on_Multiple_Qtree_different_vserver_windows
SmProtectionGroupId       : 1
PolicyName                : test2
SmPolicyId                : 4
BackupName                : Verify_Backup_on_Multiple_Qtree_different_vserver_windows_scc55_01-15-2024_01.35.17.4467
VerificationStatus        : NotApplicable
VerificationStatuses      :
SmJobError                :
BackupType                : SCC_BACKUP
CatalogingStatus          : NotApplicable
CatalogingStatuses        :
ReportDataCreatedDateTime :
PluginCode                : SCC
PluginName                : DummyPlugin
PluginDisplayName         : DummyPlugin
JobTypeId                 :
JobHost                   : scc55.sccore.test.com
----


--
====