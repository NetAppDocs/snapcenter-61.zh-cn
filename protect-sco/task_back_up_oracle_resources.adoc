---
permalink: protect-sco/task_back_up_oracle_resources.html 
sidebar: sidebar 
keywords: backup, Oracle database, policy, schedule, verification, resources 
summary: 如果资源不属于任何资源组，您可以从资源页面备份该资源。 
---
= 备份 Oracle 资源
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
如果资源不属于任何资源组，您可以从资源页面备份该资源。

.步骤
. 在左侧导航窗格中，选择“*资源*”，然后从列表中选择适当的插件。
. 在资源页面中，从视图列表中选择*数据库*。
. 点击image:../media/filter_icon.gif["筛选图标"]，然后选择主机名和数据库类型来过滤资源。
+
然后您可以点击image:../media/filter_icon.gif["筛选图标"]关闭筛选器窗格。

. 选择要备份的数据库。
+
进入“数据库保护”页面。

. 在资源页面中，执行以下步骤：
+
.. 选中复选框，然后输入要用于快照名称的自定义名称格式。
+
例如， `customtext_policy_hostname`或者 `resource_hostname`。默认情况下，时间戳会附加到快照名称。

.. 指定您不想备份的存档日志文件的目标。


. 在“策略”页面中，执行以下步骤：
+
.. 从下拉列表中选择一个或多个策略。
+
您可以通过单击来创建策略image:../media/add_policy_from_resourcegroup.gif["添加符号"]。

+
在“为选定策略配置计划”部分中，列出了选定的策略。

.. 点击image:../media/add_policy_from_resourcegroup.gif["添加符号"]在配置计划列中为您想要的策略配置计划。
.. 在“为策略_policy_name_添加计划”窗口中，配置计划，然后选择 `OK`。
+
_policy_name_ 是您选择的策略的名称。

+
配置的计划列在“已应用的计划”列中。



. 在验证页面中，执行以下步骤：
+
.. 单击“*加载定位器*”以加载SnapMirror或SnapVault卷来验证二级存储。
.. 点击image:../media/add_policy_from_resourcegroup.gif["添加符号"]在配置时间表列中为策略的所有时间表类型配置验证时间表。  + 在添加验证计划_policy_name_对话框中，您可以执行以下步骤：
.. 选择*备份后运行验证*。
.. 选择*运行计划验证*，并从下拉列表中选择计划类型。
+

NOTE: 在 Flex ASM 设置中，如果基数小于 RAC 集群中的节点数，则无法对 Leaf 节点执行验证操作。

.. 选择*在辅助位置验证*以验证辅助存储上的备份。
.. 单击“*确定*”。
+
配置的验证计划列在“已应用的计划”列中。



. 在通知页面中，从*电子邮件首选项*下拉列表中选择您想要发送电子邮件的场景。
+
您必须指定发件人和收件人的电子邮件地址以及电子邮件的主题。如果要附加对资源执行的备份操作的报告，请选择*附加作业报告*。

+

NOTE: 对于电子邮件通知，您必须使用 GUI 或 PowerShell 命令指定 SMTP 服务器详细信息 `Set-SmSmtpServer`。

. 查看摘要，然后单击“*完成*”。
+
进入数据库拓扑页面。

. 单击*立即备份*。
. 在备份页面中，执行以下步骤：
+
.. 如果您已对资源应用了多个策略，请从策略下拉列表中选择要用于备份的策略。
+
如果为按需备份选择的策略与备份计划相关联，则按需备份将根据为计划类型指定的保留设置进行保留。

.. 单击“*备份*”。


. 通过单击“*监视*”>“*作业*”来监视操作进度。


.完成后
* 在 AIX 设置中，您可以使用 `lkdev`命令锁定和 `rendev`命令重命名备份数据库所在的磁盘。
+
当您使用该备份进行恢复时，锁定或重命名设备不会影响恢复操作。

* 如果由于数据库查询执行时间超过超时值而导致备份操作失败，则应通过运行以下命令更改 ORACLE_SQL_QUERY_TIMEOUT 和 ORACLE_PLUGIN_SQL_QUERY_TIMEOUT 参数的值 `Set-SmConfigSettings`命令：
+
修改参数值后，通过运行以下命令重新启动SnapCenter插件Loader(SPL) 服务 `/opt/NetApp/snapcenter/spl/bin/spl restart`

* 如果在验证过程中无法访问该文件并且挂载点不可用，则操作可能会失败，并出现错误代码 DBV-00100 指定文件。您应该修改sco.properties中的VERIFICATION_DELAY和VERIFICATION_RETRY_COUNT参数的值。
+
修改参数值后，通过运行以下命令重新启动SnapCenter插件Loader(SPL) 服务 `/opt/NetApp/snapcenter/spl/bin/spl restart`

* 在MetroCluster配置中， SnapCenter可能无法在故障转移后检测到保护关系。
* 如果您正在备份 VMDK 上的应用程序数据，并且SnapCenter Plug-in for VMware vSphere的Java 堆大小不够大，则备份可能会失败。
+
要增加 Java 堆大小，请找到脚本文件 _/opt/netapp/init_scripts/scvservice_。在该脚本中， `do_start method`命令启动SnapCenter VMware 插件服务。将该命令更新为以下内容： `Java -jar -Xmx8192M -Xms4096M` 。



.查找更多信息
* https://kb.netapp.com/Advice_and_Troubleshooting/Data_Protection_and_Security/SnapCenter/Unable_to_detect_SnapMirror_or_SnapVault_relationship_after_MetroCluster_failover["MetroCluster故障转移后无法检测SnapMirror或SnapVault关系"^]
* https://kb.netapp.com/Advice_and_Troubleshooting/Data_Protection_and_Security/SnapCenter/Oracle_RAC_One_Node_database_is_skipped_for_performing_SnapCenter_operations["跳过 Oracle RAC One Node 数据库来执行SnapCenter操作"^]
* https://kb.netapp.com/Advice_and_Troubleshooting/Data_Protection_and_Security/SnapCenter/Failed_to_change_the_state_of_an_Oracle_12c_ASM_database_from_shutdown_to_mount["无法更改 Oracle 12c ASM 数据库的状态"^]
* https://kb.netapp.com/Advice_and_Troubleshooting/Data_Protection_and_Security/SnapCenter/What_are_the_customizable_parameters_for_backup_restore_and_clone_operations_on_AIX_systems["AIX 系统上备份、恢复和克隆操作的可自定义参数"^]（需要登录）

