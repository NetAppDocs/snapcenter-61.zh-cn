---
permalink: protect-azure/clone-oracle-database-backups.html 
sidebar: sidebar 
keywords: SnapCenter Plug-in for Oracle Database, clone, database, backups. split clone, pluggable database 
summary: 您可以使用SnapCenter克隆备份。 
---
= 克隆 Oracle 数据库备份
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以使用SnapCenter通过数据库备份来克隆 Oracle 数据库。创建的克隆是厚克隆，是在父容量池上创建的。

.步骤
. 在左侧导航窗格中，单击“*资源*”，然后从列表中选择适当的插件。
. 在资源页面中，从视图列表中选择*数据库*或*资源组*。
. 选择数据库。
. 从“管理副本”视图页面中，选择来自主存储系统的备份。
. 选择数据备份，然后单击*image:../media/clone_icon.gif["克隆图标"] *.
. 在名称页面中，选择是否要克隆数据库（CDB 或非 CDB）或克隆可插拔数据库（PDB）。
. 在位置页面中，指定所需的详细信息。
+
如果在手动 QOS 容量池中配置了 Oracle 数据库 ANF 卷，请指定克隆卷的 QOS。

+
如果未指定克隆卷的 QOS，则将使用源卷的 QOS。如果使用自动QOS容量池，则指定的QOS值将被忽略。

. 在“凭据”页面中，执行以下操作之一：
+
.. 对于 sys 用户的凭据名称，选择用于定义克隆数据库的 sys 用户密码的凭据。
.. 对于 ASM 实例凭据名称，如果启用了 OS 身份验证以连接到克隆主机上的 ASM 实例，请选择 *无*。
+
否则，选择使用“sys”用户或具有适用于克隆主机的“sysasm”权限的用户配置的 Oracle ASM 凭据。



. 在“Pre-Ops”页面中指定处方的路径和参数，并在“数据库参数设置”部分中修改用于初始化数据库的预填充数据库参数的值。
. 在 Post-Ops 页面中，默认选择 *Recover database* 和 *Until Cancel* 来执行克隆数据库的恢复。
+
.. 如果您选择“*直到取消*”， SnapCenter将通过安装最新的日志备份来执行恢复，该日志备份具有在选择进行克隆的数据备份之后的不间断存档日志序列。
.. 如果选择“*日期和时间*”， SnapCenter将恢复到指定日期和时间的数据库。
.. 如果选择“*直到 SCN*”， SnapCenter会将数据库恢复到指定的 SCN。
.. 如果您选择“指定外部存档日志位置”， SnapCenter将根据指定的 SCN 或选定的日期和时间识别并安装最佳数量的日志备份。
.. 默认情况下，选中“*创建新 DBID*”复选框，为克隆的数据库生成一个唯一的编号（DBID），以区别于源数据库。
+
如果要将源数据库的 DBID 分配给克隆的数据库，请清除该复选框。在这种情况下，如果您想将克隆的数据库注册到源数据库已注册的外部 RMAN 目录，则操作会失败。

.. 如果要为克隆数据库的默认临时表空间创建临时文件，请选中“为临时表空间创建临时文件”复选框。
.. 在*输入创建克隆时要应用的 SQL 条目*中，添加要在创建克隆时应用的 SQL 条目。
.. 在*输入克隆操作后运行的脚本*中，指定克隆操作后要运行的后记的路径和参数。


. 在通知页面中，从*电子邮件首选项*下拉列表中，选择您想要发送电子邮件的场景。
. 查看摘要，然后选择*完成*。
. 通过选择 *Monitor* > *Jobs* 来监控操作进度。




== 克隆可插入数据库

您可以将可插拔数据库 (PDB) 克隆到同一主机或备用主机上不同或相同的目标 CDB。您还可以将克隆的 PDB 恢复到所需的 SCN 或日期和时间。

.步骤
. 在左侧导航窗格中，单击“*资源*”，然后从列表中选择适当的插件。
. 在资源页面中，从视图列表中选择*数据库*或*资源组*。
. 选择单实例（多租户）类型的数据库。
. 从“管理副本”视图页面中，选择来自主存储系统的备份。
. 选择备份，然后单击*image:../media/clone_icon.gif["克隆图标"] *.
. 在名称页面中，选择*PDB Clone*并指定其他详细信息。
. 在位置页面中，指定所需的详细信息。
. 在“Pre-Ops”页面中指定处方的路径和参数，并在“数据库参数设置”部分中修改用于初始化数据库的预填充数据库参数的值。
. 在 Post-Ops 页面中，默认选择 *Until Cancel* 来执行克隆数据库的恢复。
+
.. 如果您选择“*直到取消*”， SnapCenter将通过安装最新的日志备份来执行恢复，该日志备份具有在选择进行克隆的数据备份之后的不间断存档日志序列。
.. 如果选择“*日期和时间*”， SnapCenter将恢复到指定日期和时间的数据库。
.. 如果您选择“指定外部存档日志位置”， SnapCenter将根据指定的 SCN 或选定的日期和时间识别并安装最佳数量的日志备份。
.. 默认情况下，选中“*创建新 DBID*”复选框，为克隆的数据库生成一个唯一的编号（DBID），以区别于源数据库。
+
如果要将源数据库的 DBID 分配给克隆的数据库，请清除该复选框。在这种情况下，如果您想将克隆的数据库注册到源数据库已注册的外部 RMAN 目录，则操作会失败。

.. 如果要为克隆数据库的默认临时表空间创建临时文件，请选中“为临时表空间创建临时文件”复选框。
.. 在*输入创建克隆时要应用的 SQL 条目*中，添加要在创建克隆时应用的 SQL 条目。
.. 在*输入克隆操作后运行的脚本*中，指定克隆操作后要运行的后记的路径和参数。


. 在通知页面中，从*电子邮件首选项*下拉列表中，选择您想要发送电子邮件的场景。
. 查看摘要，然后选择*完成*。
. 通过选择 *Monitor* > *Jobs* 来监控操作进度。

